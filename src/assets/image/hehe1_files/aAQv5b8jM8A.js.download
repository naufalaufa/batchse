;/*FB_PKG_DELIM*/

__d("InstamadilloStoryReplySnippet",["fbt","IGDDataclassTypes.flow","WAJids"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){if(b==null)return null;return d("WAJids").isAuthorMe(a)?h._("__JHASH__nIuKmI_fRHl__JHASH__",[h._param("username",b)]):h._("__JHASH__7Aj5lkWnpWM__JHASH__",[h._param("username",b)])}function j(a){return d("WAJids").isAuthorMe(a)?h._("__JHASH__2o9LeU_LF8P__JHASH__"):h._("__JHASH__H1PYwvDqdF___JHASH__")}function k(a,b){if(b==null)return null;return d("WAJids").isAuthorMe(a)?h._("__JHASH__i9IwumGmhVA__JHASH__",[h._param("username",b)]):h._("__JHASH__oODBqVVDzD3__JHASH__",[h._param("username",b)])}function l(a){return d("WAJids").isAuthorMe(a)?h._("__JHASH__t8BAvSkp-WI__JHASH__"):h._("__JHASH__qxjENi1bh3n__JHASH__")}function m(a,b){if(b==null)return null;return d("WAJids").isAuthorMe(a)?h._("__JHASH__9F7PSluClv8__JHASH__",[h._param("username",b)]):h._("__JHASH__BGeEHXsBPjH__JHASH__")}function a(a,b,c){var e;switch(b.action_type){case d("IGDDataclassTypes.flow").XmsgIgXmaActionType.React:e=j(a);break;case d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Share:e=b.content_type===d("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.StoryHighlight?i(a,b.username):k(a,b.username);break;case d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Reply:e=l(a);break;case d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Mention:e=m(a,c);break}return(b=e)==null?void 0:b.toString()}g.getMessageReplySnippetForStory=a}),226);
__d("useWWWIGStoriesLogging",["PolarisLogPageView","PolarisReactRedux.react","polarisStorySelectors","react","useCometRouterState"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.unstable_useMemoCache;function a(){var a=k(7),b=d("PolarisReactRedux.react").useSelector(d("polarisStorySelectors").getCurrentPostId),e=c("useCometRouterState")(),f=j(null),g;a[0]!==e||a[1]!==b||a[2]!==f?(g=function(){e!=null&&b!=null&&(f==null?void 0:f.current)!=null&&f.current!==b&&c("PolarisLogPageView")(e),f.current=b},a[0]=e,a[1]=b,a[2]=f,a[3]=g):g=a[3];var h;a[4]!==b||a[5]!==e?(h=[b,e],a[4]=b,a[5]=e,a[6]=h):h=a[6];i(g,h)}g["default"]=a}),98);
__d("getSendStoryToInstamadilloRecipient",["fbt","I64","IGDDataclassTypes.flow","InstamadilloStoryReplySnippet","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceTypeV2","LSMessageSendStatus","MNXMAPreviewImageDecorationType","PolarisLinkBuilder","asyncToGeneratorRuntime","issueSendXMAReceiverFetchCometTask","renderInstamadilloOptimisticXmaReceiverFetch"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a,e,f,g,k){var l;l=d("PolarisLinkBuilder").BASE_INSTAGRAM_URL+d("PolarisLinkBuilder").buildDirectUserStoryLink(e+"_"+((l=f)!=null?l:""));var m={__typename:"XMSGIgReceiverFetchXmaStoryFetchParams",reel_id:a,story_igid:e},n={__typename:"XMSGIgXmaContentRefDataclass",action_type:k,content_type:d("IGDDataclassTypes.flow").XmsgIgReceiverFetchContentType.Story,fetch_params:m,owner_fbid:f,target_url:l,username:g},o={authorityLevel:(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").OPTIMISTIC),replySnippet:(a=d("InstamadilloStoryReplySnippet").getMessageReplySnippetForStory("@me",n))!=null?a:void 0,replySourceTypeV2:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").IG_STORY_SHARE),sendStatus:i.of_int32(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.of_int32(1)},p={actionUrl:l,nativeUrl:l,targetId:i.of_string(e),type_:"xma_web_url"},q={authorityLevel:i.of_int32(c("LSAuthorityLevel").OPTIMISTIC),previewImageDecorationType:j.ofNumber(c("MNXMAPreviewImageDecorationType").INSTAGRAM_ICON),subtitleText:h._("__JHASH__Wk0RMsUN8WM__JHASH__").toString(),titleText:g};return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){var i=k===d("IGDDataclassTypes.flow").XmsgIgXmaActionType.React||d("IGDDataclassTypes.flow").XmsgIgXmaActionType.Reply,j={contentRef:JSON.stringify(n),text:i?f:void 0};try{var l=(yield c("renderInstamadilloOptimisticXmaReceiverFetch")(a,j,m,q,p,o));yield c("issueSendXMAReceiverFetchCometTask")({comment:i?void 0:f,isDisappearingModeSettingOn:b,offlineThreadingId:l,openEb:e,receiverFetchXma:JSON.stringify(j),threadKey:a});g==null?void 0:g(a)}catch(b){h==null?void 0:h(b,a)}});return function(b,c,d,e,f,g){return a.apply(this,arguments)}}()}g["default"]=a}),226);
__d("usePolarisStoriesProviderDisableNewPlayback",["PolarisConfig","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.unstable_useMemoCache;function a(a,b,c,e){var f=j(18),g=a.hasFocus,h=a.isBugNubActive,k=a.isCaptionModalActive,l=a.isCloseFriendsDialogActive,m=a.isExclusiveStoryDialogActive,n=a.isHidden,o=a.isKeyboardActive,p=a.isModalActive,q=a.isPaused,r=a.isStoryShareSheetActive,s=a.isStoryViewerListActive,t=a.isTransitioning,u=a.isUnfollowModalActive,v;f[0]!==h||f[1]!==m||f[2]!==l||f[3]!==o||f[4]!==p||f[5]!==q||f[6]!==r||f[7]!==s||f[8]!==t||f[9]!==u||f[10]!==k||f[11]!==n||f[12]!==g||f[13]!==b||f[14]!==c||f[15]!==e?(a=function(){var a=h||m||l||o||p||q||r||s||t||u||k||n||d("PolarisConfig").isIOS()&&!g||b!=null||c;e({isPlaybackDisabled:a})},v=[g,h,l,m,n,o,p,q,r,s,t,u,k,c,e,b],f[0]=h,f[1]=m,f[2]=l,f[3]=o,f[4]=p,f[5]=q,f[6]=r,f[7]=s,f[8]=t,f[9]=u,f[10]=k,f[11]=n,f[12]=g,f[13]=b,f[14]=c,f[15]=e,f[16]=a,f[17]=v):(a=f[16],v=f[17]);i(a,v)}g["default"]=a}),98);
__d("PolarisStoryViewInsightsDialog.react",["CometPlaceholder.react","JSResourceForInteraction","PolarisInsightsUtils","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h,k=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGWebBloksApp").__setRef("PolarisStoryViewInsightsDialog.react"));function a(a){var b=i(6),e=a.bloksBridgeOverrides,f=a.boostedStatus;a=a.mediaId;if(f==null)return null;f=d("PolarisInsightsUtils").showAdInsightsForMedia(f)?"com.instagram.insights.media_refresh.stories.ad_bottom_sheet.action":"com.instagram.insights.media_refresh.stories.bottom_sheet.action";var g;b[0]!==a?(g={media_id:a},b[0]=a,b[1]=g):g=b[1];b[2]!==f||b[3]!==e||b[4]!==g?(a=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(k,{appId:f,bridgeOverrides_DEPRECATED:e,params:g})}),b[2]=f,b[3]=e,b[4]=g,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("PolarisStoriesProvider.react",["PolarisReactRedux.react","PolarisRelationshipTypes","PolarisStoriesContext","nullthrows","polarisRelationshipSelectors.react","polarisStorySelectors","react","usePolarisDisplayProperties","usePolarisStoriesProviderDisableNewPlayback","useWWWIGStoriesLogging"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;e.useCallback;var j=e.useContext,k=e.useEffect;e.useMemo;var l=e.useState,m=e.unstable_useMemoCache;function a(){return j(d("PolarisStoriesContext").StoriesContext)}function b(a){var b=m(17),e=a.children;a=a.initialState;var f=c("nullthrows")(d("PolarisReactRedux.react").useSelector(d("polarisStorySelectors").getCurrentPostAuthor)),g=d("PolarisReactRedux.react").useSelector(function(a){return d("polarisRelationshipSelectors.react").getRelationship(a.relationships,f.id)});g=g.followedByViewer.state===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING;var h=c("usePolarisDisplayProperties")();h=h.viewportHeight;var j;b[0]!==a||b[1]!==g||b[2]!==h?(j=babelHelpers["extends"]({},d("PolarisStoriesContext").defaultContext,a,{isInitiallyFollowedByViewer:g,viewerHeight:h}),b[0]=a,b[1]=g,b[2]=h,b[3]=j):j=b[3];a=j;g=a;h=l(g);j=h[0];var n=h[1];a=d("PolarisReactRedux.react").useSelector(d("polarisStorySelectors").isFromPreviousFullscreenSession);b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return a.stories.isAppAttributionOpen},b[4]=g):g=b[4];h=d("PolarisReactRedux.react").useSelector(g);b[5]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(a){return a.stories.tappedObjectId},b[5]=g):g=b[5];g=d("PolarisReactRedux.react").useSelector(g);var o;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(o=function(a){return n(function(b){return babelHelpers["extends"]({},b,a)})},b[6]=o):o=b[6];var p=o;b[7]!==j?(o=babelHelpers["extends"]({},j,{updateStoriesContext:p}),b[7]=j,b[8]=o):o=b[8];o=o;o=o;c("useWWWIGStoriesLogging")();var q=a||h;c("usePolarisStoriesProviderDisableNewPlayback")(j,g,q,p);b[9]!==q?(a=function(){p({isResumeOverlayActive:q})},h=[q,p],b[9]=q,b[10]=a,b[11]=h):(a=b[10],h=b[11]);k(a,h);b[12]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(){p({hasFocus:document.hasFocus(),isHidden:document.hidden!=null?document.hidden:!1})},g=[p],b[12]=j,b[13]=g):(j=b[12],g=b[13]);k(j,g);b[14]!==o||b[15]!==e?(a=i.jsx(d("PolarisStoriesContext").StoriesContext.Provider,{value:o,children:e}),b[14]=o,b[15]=e,b[16]=a):a=b[16];return a}f=i.memo(b);g.useStoriesContext=a;g.StoriesContextProvider=f}),98);
__d("PolarisPostActionLoadPostShareIds",["PolarisInstapi","emptyFunction","polarisUnexpected"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.analyticsContext,d=a.entityID,e=a.entityType,f=a.qeUniverseName,g=f===void 0?"ig_external_sharing_v2":f,k=a.sharePlatform,l;switch(e){case"photo":case"sidecar":case"video":l=i;break;case"profile":l=j;break}return l==null?c("emptyFunction"):function(a){return l(d,{containermodule:b,exposed_to_experiment:"true",qe_universe_name:g,share_to_app:k}).then(function(b){b!=null&&a(h(d,e,k,b))})["catch"](function(a){return c("polarisUnexpected")(a)})}}function h(a,b,c,d){return function(e){var f;switch(b){case"photo":case"sidecar":case"video":f={postId:a,sharePlatform:c,shareUrl:d,type:"POST_SHARE_URL_LOADED"};break;case"profile":f={sharePlatform:c,shareUrl:d,type:"PROFILE_SHARE_URL_LOADED",username:a};break}f!=null&&e(f)}}function i(a,b){return d("PolarisInstapi").apiGet("/api/v1/media/{media_id}/permalink/",{path:{media_id:a},query:b}).then(function(a){return a.data.permalink})}function j(a,b){return d("PolarisInstapi").apiGet("/api/v1/third_party_sharing/{profile_to_share_username}/get_profile_to_share_url/",{path:{profile_to_share_username:a},query:b}).then(function(a){return a.data.profile_to_share_url})}g.loadPostShareUrl=a}),98);
__d("PolarisIGCoreAvatar.react",["cx","PolarisFastLink.react","PolarisIGCoreConstants","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i;function l(a){var b=a.children,d=a.className,e=a.href;a=a.onClick;switch(!0){case e!=null:return k.jsx(c("PolarisFastLink.react"),{className:d!=null?d:void 0,href:e,onClick:a,children:b});case a!=null:return k.jsx("button",{className:c("joinClasses")(d,"_aag4"),onClick:a,children:b});default:return k.jsx("span",{className:d,children:b})}}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=j(11),d=a.alt,e=a.dangerouslySetClassName,f=a.href,g=a.onClick,h=a.size;a=a.src;h=h===void 0?"medium":h;e=e!=null?e.__className:null;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i="_aag5",b[0]=i):i=b[0];var m=c("PolarisIGCoreConstants").AVATAR_SIZES[h];h=c("PolarisIGCoreConstants").AVATAR_SIZES[h];b[1]!==d||b[2]!==m||b[3]!==a||b[4]!==h?(i=k.jsx("img",{alt:d,className:i,height:m,src:a,width:h}),b[1]=d,b[2]=m,b[3]=a,b[4]=h,b[5]=i):i=b[5];b[6]!==e||b[7]!==f||b[8]!==g||b[9]!==i?(d=k.jsx(l,{className:e,href:f,onClick:g,children:i}),b[6]=e,b[7]=f,b[8]=g,b[9]=i,b[10]=d):d=b[10];return d}g["default"]=a}),98);