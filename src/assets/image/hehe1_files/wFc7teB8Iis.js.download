;/*FB_PKG_DELIM*/

__d("IGDMessageButton.react",["IGDSIconButton.react","IGDSTooltip.react","PolarisIGCorePressable.react","react","useCurrentDisplayMode","useIGDDeviceType"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useState,k=b.unstable_useMemoCache,l={button:{opacity:"x15vok9n",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},buttonWithHover:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xxk0z11",opacity:"x1hc1fzr",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0}};function a(a){var b=k(19),e,f,g;b[0]!==a?(g=a.label,e=a.xstyle,f=babelHelpers.objectWithoutPropertiesLoose(a,["label","xstyle"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g):(e=b[1],f=b[2],g=b[3]);a=j(!1);var h=a[0],m=a[1];b[4]!==e?(a=[l.button,l.buttonWithHover,e],b[4]=e,b[5]=a):a=b[5];b[6]!==f||b[7]!==a?(e=i.jsx(c("IGDSIconButton.react"),babelHelpers["extends"]({},f,{xstyle:a})),b[6]=f,b[7]=a,b[8]=e):e=b[8];f=e;a=c("useCurrentDisplayMode")();e=a==="dark";a=d("useIGDDeviceType").useIGDDeviceType();a=a.isMobile;e=e?"primary":"black";a=a?!1:h;var n,o;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){m(!0)},n=function(){m(!1)},o=function(){},b[9]=h,b[10]=n,b[11]=o):(h=b[9],n=b[10],o=b[11]);b[12]!==f?(h=i.jsx(c("PolarisIGCorePressable.react"),{onMouseEnter:h,onMouseLeave:n,onPress:o,children:f}),b[12]=f,b[13]=h):h=b[13];b[14]!==e||b[15]!==a||b[16]!==g||b[17]!==h?(n=i.jsx(c("IGDSTooltip.react"),{align:"middle",color:e,isVisible:a,position:"above",tooltip:g,children:h}),b[14]=e,b[15]=a,b[16]=g,b[17]=h,b[18]=n):n=b[18];return n}g["default"]=a}),98);
__d("IGDMessageMoreContextMenuButton.react",["fbt","IGDInstamadilloUtils","IGDMessageButton.react","IGDSLazyPopoverTrigger.react","IGDSMoreVerticalPanoOutline24Icon.react","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","LSMessagingThreadTypeUtil","MessengerWebUXLogger","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i,l=c("requireDeferred")("IGDMessageContextMenu.react").__setRef("IGDMessageMoreContextMenuButton.react");function a(a){var b=j(27),e=a.message,f=a.outgoing;a=a.thread;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__nNxAei6AI9v__JHASH__"),b[0]=g):g=b[0];var i=g;b[1]!==a?(g=d("IGDInstamadilloUtils").isInstamadilloCutover(a),b[1]=a,b[2]=g):g=b[2];var m=g;b[3]!==a?(g=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),b[3]=a,b[4]=g):g=b[4];var n=g;b[5]!==a?(g=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a),b[5]=a,b[6]=g):g=b[6];var o=g;b[7]!==a?(g=a?d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType):!1,b[7]=a,b[8]=g):g=b[8];var p=g,q=c("MessengerWebUXLogger").useInteractionLogger(),r=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),s;b[9]!==q||b[10]!==o||b[11]!==n||b[12]!==m||b[13]!==p||b[14]!==e.messageId||b[15]!==r?(g=function(a){q==null?void 0:q({eventName:"open_message_options",extraData:{is_dm:String(o),is_instamadillo:String(n),is_instamadillo_tlc:String(m),is_secure:String(p),message_id:e.messageId},flowInstanceId:r}),a()},s=[r,o,n,m,p,q,e.messageId],b[9]=q,b[10]=o,b[11]=n,b[12]=m,b[13]=p,b[14]=e.messageId,b[15]=r,b[16]=g,b[17]=s):(g=b[16],s=b[17]);var t=d("Int64Hooks").useCallbackInt64(g,s);g=f?"end":"start";b[18]!==e||b[19]!==a?(s={message:e,thread:a},b[18]=e,b[19]=a,b[20]=s):s=b[20];b[21]!==t?(f=function(a,b){return k.jsx(c("IGDMessageButton.react"),{innerRef:a,label:i,onClick:function(){return t(b)},children:k.jsx(c("IGDSMoreVerticalPanoOutline24Icon.react"),{alt:i,color:"ig-primary-text","data-testid":void 0,size:16})})},b[21]=t,b[22]=f):f=b[22];b[23]!==g||b[24]!==s||b[25]!==f?(a=k.jsx(c("IGDSLazyPopoverTrigger.react"),{align:g,popoverProps:s,popoverResource:l,popoverType:"menu",position:"above",children:f}),b[23]=g,b[24]=s,b[25]=f,b[26]=a):a=b[26];return a}g["default"]=a}),226);
__d("IGDMessageReactionButton.react",["fbt","EmojiFormat.bs","IGDInstamadilloUtils","IGDMessageButton.react","IGDSFace2OutlineIcon.react","IGDSLazyPopoverTrigger.react","IGDThreadListNewMessageLoggingDataContext","Int64Hooks","LSMessagingThreadTypeUtil","MWLSThread","MWV2MessageReactionHooks","MessengerWebUXLogger","UnicodeUtils","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","requireDeferred","useAsyncReStore","useIGDGlobalReactMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));e=i;e.useCallback;var l=e.unstable_useMemoCache,m=c("requireDeferred")("IGDComposerEmojiPicker.react").__setRef("IGDMessageReactionButton.react");function a(a){var e=l(23),f=a.message,g=a.outgoing,i=a.setReactionsMenuOpen,n=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReaction(f),o=c("useIGDGlobalReactMessage")(f,"reaction_tray");e[0]!==n||e[1]!==o?(a=function(a){var b=d("EmojiFormat.bs").codeArrayToUnicode(a);if(n!=null){var e=(j||(j=d("UnicodeUtils"))).getCodePoints(n);b===n&&(b=void 0);e[0]===10084&&a[0]===10084&&(b=void 0)}c("promiseDone")(o(b,"reaction"))},e[0]=n,e[1]=o,e[2]=a):a=e[2];a=a;g=g?"end":"start";var p;e[3]!==a||e[4]!==f.threadKey?(p={closeAfterSelect:!0,onClose:c("emptyFunction"),onSelect:a,showPopoverArrow:!1,threadKey:f.threadKey},e[3]=a,e[4]=f.threadKey,e[5]=p):p=e[5];a=p;e[6]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._("__JHASH__lHWykrNu5cj__JHASH__"),e[6]=p):p=e[6];var q=p,r=c("MessengerWebUXLogger").useInteractionLogger(),s=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),t=c("useAsyncReStore")(),u;e[7]!==t||e[8]!==f.threadKey||e[9]!==f.messageId||e[10]!==r||e[11]!==s?(p=function(a){c("promiseDone")(t.then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("MWLSThread").getThreadAsync(a,f.threadKey));if(a){var b=d("IGDInstamadilloUtils").isInstamadilloCutover(a),c=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),e=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);a=a?d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType):!1;r==null?void 0:r({eventName:"reaction_open_emoji_picker",extraData:{is_dm:String(e),is_instamadillo:String(c),is_instamadillo_tlc:String(b),is_secure:String(a),message_id:f.messageId},flowInstanceId:s})}});return function(b){return a.apply(this,arguments)}}())),a()},u=[t,f.threadKey,f.messageId,r,s],e[7]=t,e[8]=f.threadKey,e[9]=f.messageId,e[10]=r,e[11]=s,e[12]=p,e[13]=u):(p=e[12],u=e[13]);var v=d("Int64Hooks").useCallbackInt64(p,u);e[14]!==i?(p=function(a){return i(function(){return a})},e[14]=i,e[15]=p):p=e[15];e[16]!==v?(u=function(a,b){return k.jsx(c("IGDMessageButton.react"),{innerRef:a,label:q,onClick:function(){return v(b)},children:k.jsx(c("IGDSFace2OutlineIcon.react"),{alt:q,color:"ig-primary-text","data-testid":void 0,size:16})})},e[16]=v,e[17]=u):u=e[17];var w;e[18]!==g||e[19]!==p||e[20]!==a||e[21]!==u?(w=k.jsx(c("IGDSLazyPopoverTrigger.react"),{align:g,onVisibilityChange:p,popoverProps:a,popoverResource:m,popoverType:"dialog",position:"above",children:u}),e[18]=g,e[19]=p,e[20]=a,e[21]=u,e[22]=w):w=e[22];return w}g["default"]=a}),226);
__d("IGDMessageReplyButton.react",["IGDInstamadilloUtils","IGDMessageButton.react","IGDSReplyPanoOutline24Icon.react","react","useIGDMessageReply.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(6),e=a.message,f=a.onClose;a=a.thread;f=c("useIGDMessageReply.react")(e,a,f);var g=f[0];f=f[1];a=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);if(!d("IGDInstamadilloUtils").shouldRenderMessageReply(e,a))return null;b[0]!==f?(e=j.jsx(c("IGDSReplyPanoOutline24Icon.react"),{alt:f,color:"ig-primary-text","data-testid":void 0,size:16}),b[0]=f,b[1]=e):e=b[1];b[2]!==f||b[3]!==g||b[4]!==e?(a=j.jsx(c("IGDMessageButton.react"),{label:f,onClick:g,children:e}),b[2]=f,b[3]=g,b[4]=e,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("MWPBaseMessageListRowActions.react",["XPlatReactEnvironment","gkx","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=d("XPlatReactEnvironment").isWeb(),l={hidden:{visibility:"xlshs6z",$$css:!0},incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",width:"x1mqs8db",$$css:!0},rootNative:{rowGap:"xzgd20w",columnGap:"xl5lk40",$$css:!0},rootWeb:{columnGap:"xl5lk40",$$css:!0}},m=i.createContext("full");function n(a){var b=a.children;a=a.outgoing;return i.jsx(d("react-strict-dom").html.div,{role:"none",style:[l.root,k?l.rootWeb:l.rootNative,a?l.outgoing:l.incoming],children:b})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.children;a=a.showWith;a=a===void 0?"full":a;var c=j(m);c=c==="partial"&&a!=="partial";return i.jsx(d("react-strict-dom").html.div,{"aria-hidden":c,style:c&&l.hidden,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.ariaHidden,e=a.children,f=a.hasReactions,g=a.onMouseEnter,h=a.onMouseLeave,j=a.outgoing,k=a.visibility;k=k===void 0?"full":k;a=a.xstyle;return i.jsx(m.Provider,{value:k,children:i.jsx(d("react-strict-dom").html.div,{"aria-hidden":(k=b)!=null?k:!1,onMouseEnter:g,onMouseLeave:h,style:[o.root,f&&!c("gkx")("1799")&&o.moveUpToAccountForReactions,j?o.outgoing:o.incoming,a],children:i.jsx(n,{outgoing:j,children:e})})})}b.displayName=b.name+" [from "+f.id+"]";var o={incoming:{paddingStart:"x1t2a60a",$$css:!0},moveUpToAccountForReactions:{paddingBottom:"x1hhzuzn",$$css:!0},outgoing:{paddingEnd:"x1mpkggp",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1mqs8db",zIndex:"x1n327nk",$$css:!0}};g.MWPBaseMessageListRowActionsList=n;g.MWPBaseMessageListRowActionsListItem=a;g.MWPBaseMessageListRowActionsContainer=b}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWPThreadCapabilitiesContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),e=b.canUnsendMessage;b=b.isPaused;a=a.cannotUnsendReason!=null?(h||(h=d("I64"))).equal(a.cannotUnsendReason,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0;return e&&a&&!b}g["default"]=a}),98);
__d("useShowPersistentGenAIFeedbackButtons",["ReQL","ReQLSuspense","useGenAIFeedbackSubmissionStatus","useIsGenAiFeedbackEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var g=(h||(h=c("useReStore")))();e=c("useIsGenAiFeedbackEnabled")(b,e);var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.messages.index("threadKeyPrimarySortKeySecondarySortKeyBotResponseId"),["botResponseId"]).getKeyRange(a)},[g,a],f.id+":43"),j=c("useGenAIFeedbackSubmissionStatus")(b);return e&&(i==null?void 0:i.botResponseId)===b&&j==null}g["default"]=a}),98);
__d("IGDMessageRowActions.react",["I64","IGDInstamadilloUtils","IGDMessageMoreContextMenuButton.react","IGDMessageReactionButton.react","IGDMessageReplyButton.react","LSBitFlag","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWPActor.react","MWPBaseMessageListRowActions.react","MWPMessageHasAttachment","MessagingAttachmentType","ReQL","ReQLSuspense","cr:2097","cr:968","gkx","react","useGenAIFeedbackSubmissionStatus","useIGDDeviceType","useIGDIsGenAiReelsPlugin","useIsGenAiFeedbackEnabled","useIsReadOnlyFeatureLimited","useIsThreadBlocked","useMWPCanRemoveMessageGlobally","useReStore","useShowPersistentGenAIFeedbackButtons"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useState,n=c("gkx")("664")===!0,o=[(k||(k=d("LSIntEnum"))).ofNumber(1),k.ofNumber(16384),k.ofNumber(2),k.ofNumber(4)];function p(a){var e=a.message,g=a.outgoing,i=a.setReactionsMenuOpen;a=a.thread;var m=(h||(h=c("useReStore")))(),p=d("MWPActor.react").useActor(),q=c("useIsThreadBlocked")(),r=c("useIsReadOnlyFeatureLimited")(),s=a.threadKey,t=a.threadType,u=e.displayedContentTypes,v=e.messageId,w=e.senderId,x=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.tables.contacts,["blockedByViewerStatus","capabilities","capabilities2"]).getKeyRange(w)},[m,w],f.id+":94"),y=c("MWPMessageHasAttachment")(e),z=d("ReQLSuspense").useFirst(function(){return y?d("ReQL").fromTableAscending(m.tables.attachments,["attachmentType","isSharable"]).getKeyRange(s,v):d("ReQL").empty()},[m,s,v,y],f.id+":106");p=(j||(j=d("I64"))).equal(w,p);t=!p&&d("LSMessagingThreadTypeUtil").isOneToOne(t)&&x!=null?!(j||(j=d("I64"))).equal(x.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)):!1;var A=x!=null&&d("LSContactBitOffset").has(66,x);x=x!=null&&d("LSContactBitOffset").has(18,x);var B=d("LSMessagingThreadTypeUtil").isIGDMessageRequest(a);x=x&&!p&&o.findIndex(function(a){return(j||(j=d("I64"))).equal(u,a)})!==-1;var C=z!=null&&((j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))),D=z!=null&&(j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)),E=(j||(j=d("I64"))).equal(u,d("LSBitFlag").empty)&&!C;p=c("useMWPCanRemoveMessageGlobally")(e)&&p;z=z!=null&&(j||(j=d("I64"))).equal(z.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?z.isSharable:!0;var F=e.replySourceTypeV2!=null&&(k||(k=d("LSIntEnum"))).toNumber(e.replySourceTypeV2)===c("LSMessageReplySourceTypeV2").FORWARD,G=(j||(j=d("I64"))).equal(u,(k||(k=d("LSIntEnum"))).ofNumber(1))||(j||(j=d("I64"))).equal(u,(k||(k=d("LSIntEnum"))).ofNumber(1033));G=G||F&&!!e.text;F=!q&&!A&&!B&&!r&&!e.isUnsent&&!E&&d("LSThreadBitOffset").has(103,a)&&z&&!t&&!(j||(j=d("I64"))).equal(e.displayedContentTypes,(k||(k=d("LSIntEnum"))).ofNumber(256))&&!C&&!D;z=d("useIGDDeviceType").useIGDDeviceType();t=z.isMobile;C=c("useIsGenAiFeedbackEnabled")(e.botResponseId,n);D=c("useGenAIFeedbackSubmissionStatus")(e.botResponseId);z=C&&D==null;C=!t&&z;D=C&&b("cr:2097")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:2097"),{message:e})}):null;t=C&&b("cr:968")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:968"),{message:e})}):null;z=!q&&!A&&!B&&!r&&d("LSThreadBitOffset").has(42,a)&&!e.isUnsent&&!E&&!C;var H=d("LSThreadBitOffset").has(18,a),I=d("LSThreadBitOffset").has(139,a),J=d("LSThreadBitOffset").has(169,a);q=!q&&!A&&!B&&!r&&!e.isUnsent&&!E&&(I?J:H)&&!C;A=c("gkx")("24015");B=A||!E&&(F||p||G||x);r=q?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageReactionButton.react"),{message:e,outgoing:g,setReactionsMenuOpen:i})}):null;I=z?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageReplyButton.react"),{message:e,thread:a})}):null;J=B?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("IGDMessageMoreContextMenuButton.react"),{message:e,outgoing:g,thread:a})}):null;return l.jsxs(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsList,{outgoing:g,children:[D,t,r,I,J]})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.ariaHidden;b=b===void 0?!1:b;var e=a.focused,f=a.hasReactions,g=a.hidden;g=g===void 0?!1:g;var h=a.hovered,i=a.message,j=a.outgoing;a=a.thread;var k=m(!1),n=k[0];k=k[1];var o=d("useIGDDeviceType").useIGDDeviceType();o=o.isMobile;var q=c("useIsGenAiFeedbackEnabled")(i.botResponseId,c("gkx")("664")===!0),r=c("useGenAIFeedbackSubmissionStatus")(i.botResponseId),s=c("useIGDIsGenAiReelsPlugin")(i),t=c("useShowPersistentGenAIFeedbackButtons")(i.threadKey,i.botResponseId,c("gkx")("664")===!0);s=s?!1:o?q&&r==null:t;o=h||e||n;q=!g&&(o||s);return l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsContainer,{ariaHidden:b,hasReactions:f,outgoing:j,visibility:o===!0?"full":"partial",children:q?l.jsx(p,{message:i,outgoing:j,setReactionsMenuOpen:k,thread:a}):null})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.ariaHidden;b=b===void 0?!1:b;var e=a.focused,g=a.hasReactions,i=a.hidden;i=i===void 0?!1:i;var j=a.hovered,k=a.message;a=a.outgoing;var m=(h||(h=c("useReStore")))(),n=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.tables.threads,["parentThreadKey","threadKey","threadSubtype","threadType"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(k.threadKey)},[m,k.threadKey],f.id+":419"),o=d("IGDInstamadilloUtils").canMutateIGDMessage(k);return n!=null&&o?l.jsx(q,{ariaHidden:b,focused:e,hasReactions:g,hidden:i,hovered:j,message:k,outgoing:a,thread:n}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);