;/*FB_PKG_DELIM*/

__d("LSOnMessageStatusChange.nop",["Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c,d,e,f,g,i){return(h||(h=b("Promise"))).resolve()}g["default"]=a}),98);
__d("LSReplaceOptimsiticMessage",["LSOnMessageStatusChange.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(d){return c.nativeOperation(b("LSOnMessageStatusChange.nop"),void 0,a[0],a[1],c.i64.cast([0,60]),void 0)},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0]]],"optimistic"]),function(b){return b.offlineThreadingId===a[0]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(b){var d=b.update;b.item;return d({messageId:a[1],authorityLevel:c.i64.cast([0,60]),sendStatus:c.i64.cast([0,2]),sendStatusV2:c.i64.cast([0,2])})})}])},function(a){return c.resolve(d)}])}e.exports=a}),null);
__d("LSUpdateMessagesOptimisticContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(31).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.taskId,a[0])&&c.textHasLinks!==void 0}),function(a){var b=a.update;a.item;return b({textHasLinks:void 0})})},function(a){return b.resolve(c)}])}e.exports=a}),null);